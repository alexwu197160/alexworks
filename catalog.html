<!doctype html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Hello, Alex Works!</title>
    <link rel="stylesheet" href="./css/bootstrap.css">
    <link rel="stylesheet" href="./css/catalog.css">
    <link rel="stylesheet" href="./sass/app.css">

</head>

<body>
    <div id="top"></div>
    <div id="header"></div>
    <div class="loader"></div>
    <nav aria-label="breadcrumb" class="border-top border-danger border-5 mybreadcrumb-t" id="a">
        <ol class="breadcrumb ms-2 pb-1">
            <li class="breadcrumb-item"><a href="index.html">Home</a></li>
            <li class="breadcrumb-item"><a href="allworks.html">Works Area</a></li>
            <li class="breadcrumb-item active" aria-current="page">Catalog</li>
        </ol>
    </nav>
    <div class="container mytitle">
        <div class="row wrap">
            <div class="col-12 body">
                <div class="row mx-auto mytitles">
                    <h3 Class="border-start border-5 border-danger px-3">型錄設計</h3>
                    <p>提升企業品牌專業形象，快速、專業、客製化的設計服務</p>
                </div>

                <div class="waterfall-container">
                    <img class="waterfall-item item-1" src="images/dm/adcheneal-dm-1.jpg"></img>
                    <img class="waterfall-item item-2" src="images/dm/ELA-confirmA4.jpg"></img>
                    <img class="waterfall-item item-3" src="images/dm/formosa.jpg"></img>
                    <a href="t5/index.html" target="_blank"><img class="waterfall-item item-4" src="images/dm/game-01.jpg"></img>
                    </a>
                    <img class="waterfall-item item-5" src="images/dm/nars.jpg"></img>
                    <img class="waterfall-item item-6" src="images/dm/adcheneal-dm-2.jpg"></img>
                    <img class="waterfall-item item-7" src="images/dm/scBank.jpg"></img>
                    <img class="waterfall-item item-8" src="images/dm/game-02.jpg"></img>
                    <img class="waterfall-item item-9" src="images/dm/game-03.jpg"></img>
                    <img class="waterfall-item item-10" src="images/dm/dms-01.jpg"></img>
                    <img class="waterfall-item item-11" src="images/dm/dms-02.jpg"></img>
                    <img class="waterfall-item item-12" src="images/dm/dms-03.jpg"></img>
                    <img class="waterfall-item item-13" src="images/dm/dms-04.jpg"></img>
                    <img class="waterfall-item item-14" src="images/dm/dms-05.jpg"></img>
                    <img class="waterfall-item item-15" src="images/dm/dms-06.jpg"></img>
                    <img class="waterfall-item item-16" src="images/dm/dms-07.jpg"></img>
                    <img class="waterfall-item item-17" src="images/dm/dms-08.jpg"></img>
                    <img class="waterfall-item item-18" src="images/dm/dms-09.jpg"></img>
                    <img class="waterfall-item item-19" src="images/dm/dms-10.jpg"></img>
                    <img class="waterfall-item item-20" src="images/dm/dms-11.jpg"></img>
                    <img class="waterfall-item item-21" src="images/dm/dms-12.jpg"></img>
                    <img class="waterfall-item item-22" src="images/dm/dms-13.jpg"></img>
                    <img class="waterfall-item item-23" src="images/dm/dms-14.jpg"></img>
                    <img class="waterfall-item item-24" src="images/dm/dms-15.jpg"></img>
                    <img class="waterfall-item item-25" src="images/dm/dms-16.jpg"></img>
                    <img class="waterfall-item item-26" src="images/dm/dms-17.jpg"></img>
                    <img class="waterfall-item item-27" src="images/dm/dms-18.jpg"></img>
                    <img class="waterfall-item item-28" src="images/dm/dms-19.jpg"></img>
                    <img class="waterfall-item item-29" src="images/dm/dms-20.jpg"></img>
                    <img class="waterfall-item item-30" src="images/dm/dms-21.jpg"></img>
                    <img class="waterfall-item item-31" src="images/dm/dms-22.jpg"></img>
                    <img class="waterfall-item item-32" src="images/dm/dms-23.jpg"></img>
                    <img class="waterfall-item item-33" src="images/dm/dms-24.jpg"></img>
                    <img class="waterfall-item item-34" src="images/dm/dms-25.jpg"></img>
                    <img class="waterfall-item item-35" src="images/dm/dms-26.jpg"></img>
                    <img class="waterfall-item item-36" src="images/dm/dms-27.jpg"></img>
                    <img class="waterfall-item item-37" src="images/dm/dms-28.jpg"></img>
                    <img class="waterfall-item item-38" src="images/dm/dms-29.jpg"></img>
                    <img class="waterfall-item item-39" src="images/dm/dms-30.jpg"></img>
                    <img class="waterfall-item item-40" src="images/dm/dms-31.jpg"></img>
                </div>
            </div>
        </div>
    </div>
    <p class="btn_top"><a href="#top">top</a></p>
    <div id="footer"></div>
    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable modal-fullscreen-sm-down">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Login 功能未開啟</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <h3>活動尚未開始，敬請期待</h3>
                    <p>未串接 API、資料 JSON、API Method RESTful</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary disabled" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-danger disabled">Save changes</button>
                </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js " integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM " crossorigin="anonymous "></script>
    <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>
    <script src="https://s1.pearlcdn.com/TW/contents/js/lib/owl.carousel.min.js"></script>
    <script src="./js/jquery3.7.js"></script>
    <!-- loader -->
    <script>
        window.addEventListener('load', (e) => {
            document.body.classList.add('loaded');
        });
    </script>
    <script>
        $(function() {
            $("#header").load("layouts/header.html");
            $("#footer").load("layouts/footer.html");
        });
    </script>
    <script>
        // for 循环遍历heights数组，返回最高的高度和对应的列数
        function getMaxCoulmn(columnCount, heights) {
            let maxHeight = 0;
            let maxIndex = 0
            for (i = 0; i < columnCount; i++) {
                if (heights[i] > maxHeight) {
                    maxIndex = i;
                    maxHeight = heights[i];
                }
            }
            return {
                maxHeight: maxHeight,
                maxIndex: maxIndex
            };
        }

        // 根容器
        var body = document.querySelector('.body');
        // 瀑布流的承载容器，动态的根据显示列数更新其宽度
        // 通过设置左右margin为auto，可以使其在根容器中居中显示 
        var container = document.querySelector('.waterfall-container');
        // 所有的瀑布流对象
        var items = document.querySelectorAll('.waterfall-item');
        // 自定义间距，与css设置的margin大小一致
        var gap = 10;
        // 一个对象的宽度，包含对象自身宽度加上右边距
        var itemWidth = items[0].offsetWidth + gap;

        function waterFall() {
            // 获取可存在的最大列数
            let columnCount = parseInt(body.offsetWidth / itemWidth);
            // 高度数组，包含所有列的高度
            let heights = [];
            // 最大列高
            let maxHeight = 0;
            // 最大列在heights中的下表索引
            let maxIndex = 0;
            // 设置瀑布流容器的宽度，使其恰好包裹所有元素
            container.style.width = itemWidth * columnCount + 'px';
            // 遍历每一项元素
            for (let i = 0; i < items.length; i++) {
                // 第一层，将marginTop设为0即可
                if (i < columnCount) {
                    items[i].style.marginTop = 0;
                    // 获取当前元素高度
                    let itemHeight = items[i].offsetHeight + gap;
                    // 将高度赋值给高度数组的对应列
                    heights[i] = itemHeight;
                    // 如果是一行的最后一项元素，说明当前一层的元素已经全部布置完成
                    // 此时遍历高度数组，获取高度最高的一项，将其存入maxHeight和maxIndex中
                    if (i == columnCount - 1) {
                        let temp = getMaxCoulmn(columnCount, heights);
                        maxHeight = temp.maxHeight;
                        maxIndex = temp.maxIndex;
                    }
                    // 其他层
                } else {
                    // 判断当前元素处于第几列
                    let column = i % columnCount;
                    // 获取当前元素高度
                    let itemHeight = items[i].offsetHeight + gap;
                    // 设置元素的上边距
                    // 其偏移量的计算方法是：
                    // 所有列高度最大值 - 当前列的高度
                    items[i].style.marginTop = '-' + (maxHeight - heights[column]) + 'px';
                    // 更新高度数组
                    heights[column] += itemHeight;
                    // 当前元素为一行最后一项或整个页面最后一个元素触发，更新高度的最大值
                    if (column == columnCount - 1 || i == items.length - 1) {
                        let temp = getMaxCoulmn(columnCount, heights);
                        maxHeight = temp.maxHeight;
                        maxIndex = temp.maxIndex;
                    }
                }
            }
        }


        // 当页面加载时，进行排版
        window.onload = function() {
            waterFall();
        }

        // 当页面加载时，进行排版
        window.onresize = function() {
            waterFall();
        }
    </script>

</body>

</html>